var drawTool=null;
require("esri/map esri/toolbars/draw esri/graphic esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol esri/Color esri/geometry/geometryEngine dojo/dom dojo/dom-attr dojo/dom-class dojo/on dojo/domReady!".split(" "),function(u,n,v,w,f,p,k,x,d,g,e,y){function z(a){var b=g.get(this,"id");g.get(this,"class");var c=e.contains(this,"drawing");q.forEach(function(a){g.get(a,"id")===b?(c&&(l(a,"undrawing"),drawTool.deactivate(),h.graphics.clear()),c||(l(a,"drawing"),
drawTool.activate(n[b]))):l(a,"undrawing")})}function l(a,b){e.remove(a,"undrawing");e.remove(a,"drawing");e.add(a,b);e.remove(a,"teal");"drawing"===b&&e.add(a,"teal")}function A(a){a=a.geometry;m.forEach(function(a){g.set(a,"value","")});h.graphics.clear();r(a,m[0]);t(a);$("#isBuffer").checkbox("is checked")&&(a=B(a),r(a,m[1]),t(a))}function B(a){var b=$("#units").val(),c=$("#distance").val();return x.geodesicBuffer(a,c,b,!0)}function r(a,b){var c="point"===a.type?JSON.stringify({x:a.x,y:a.y,spatialReference:a.spatialReference}):
"polyline"===a.type?JSON.stringify({paths:a.paths,spatialReference:a.spatialReference}):"polygon"===a.type?JSON.stringify({rings:a.rings,spatialReference:a.spatialReference}):void 0;g.set(b,"value",c)}function t(a){var b=a.type;if("point"===b){b=new k([237,131,33,1]);var c=new f;c.setWidth(2.25);c.setColor(b);var d=new p;d.setAngle(360);d.setColor(b);d.setOutline(c);d.setSize(24);d.setPath("M16,3.5c-4.142,0-7.5,3.358-7.5,7.5c0,4.143,7.5,18.121,7.5,18.121S23.5,15.143,23.5,11C23.5,6.858,20.143,3.5,16,3.5z M16,14.584c-1.979,0-3.584-1.604-3.584-3.584S14.021,7.416,16,7.416S19.584,9.021,19.584,11S17.979,14.584,16,14.584z");
d.setStyle(p.STYLE_PATH);b=d}else"polyline"===b?(b=new k([237,131,33,1]),c=new f,c.setStyle(f.STYLE_SOLID),c.setWidth(3),c.setColor(b),b=c):"polygon"===b?(b=new f,b.setWidth(2),b.setStyle(f.STYLE_DASH),b.setColor(new k([255,255,255,.85])),c=new w,c.setColor(new k([255,85,0,.28])),c.setOutline(b),b=c):b=void 0;c=new v;c.setGeometry(a);c.setSymbol(b);h.graphics.add(c)}var h=new u("map",{basemap:"osm",center:[121.118329,25.059745],zoom:15});$(".ui.checkbox").checkbox();$("select.dropdown").dropdown();
var q=[d.byId("POINT"),d.byId("POLYLINE"),d.byId("RECTANGLE")],m=[d.byId("geoString"),d.byId("bufferString")];d.byId("geoString");d.byId("bufferString");h.on("load",function(){drawTool=new n(h,{showTooltips:!0});drawTool.on("draw-complete",A);q.forEach(function(a){y(a,"click",z)})})});